---
# Flux CD Toolkit Components
# Generated by: flux install --export --version=v2.2.3
#
# This file defines the Flux controllers that power the GitOps engine.
# In production, regenerate with:
#   flux install --export > platform/flux-system/gotk-components.yaml
#
# Components installed:
#   - source-controller: Watches Git repos and Helm repos for changes
#   - kustomize-controller: Reconciles Kustomization CRDs
#   - helm-controller: Reconciles HelmRelease CRDs
#   - notification-controller: Sends/receives events (webhooks, alerts)
#
# NOTE: This is a placeholder. The actual content is generated by `flux install`.
# Run `task bootstrap-flux` which executes `flux bootstrap` to populate this file
# with the full controller manifests for Flux v2.2.3.
#
# The bootstrap command will:
#   1. Install Flux controllers into the flux-system namespace
#   2. Create this file with the full manifests
#   3. Create gotk-sync.yaml with the Git sync configuration
#   4. Commit and push to the configured repository
#
# To manually generate for review:
#   flux install --version=v2.2.3 --export > gotk-components.yaml

apiVersion: v1
kind: Namespace
metadata:
  name: flux-system
  labels:
    app.kubernetes.io/part-of: sre-platform
    app.kubernetes.io/managed-by: flux
    # Istio sidecar injection is NOT enabled for flux-system
    # Flux controllers must operate independently of the service mesh
