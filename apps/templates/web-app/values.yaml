---
# -- Developer-facing values (what app teams configure) --
app:
  # Application name, used for resource naming
  name: ""
  # Owning team name, used for labels and RBAC
  team: ""
  image:
    # Container image repository (must be from harbor.sre.internal)
    repository: ""
    # Image tag (must be pinned, never use "latest")
    tag: ""
    pullPolicy: IfNotPresent
  # Container port the application listens on
  port: 8080
  # Number of replicas (used when autoscaling is disabled)
  replicas: 2
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  # Environment variables
  # - name: DATABASE_URL
  #   value: "postgres://..."
  # - name: API_KEY
  #   secretRef: my-api-key  # Synced from OpenBao via ESO
  env: []
  probes:
    liveness:
      path: /healthz
      initialDelaySeconds: 10
      periodSeconds: 10
    readiness:
      path: /readyz
      initialDelaySeconds: 5
      periodSeconds: 5

# -- Ingress (Istio VirtualService) --
ingress:
  enabled: false
  # Hostname for the application
  host: ""
  # Istio gateway reference
  gateway: "istio-system/sre-gateway"

# -- Autoscaling --
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilization: 80

# -- Platform integration (usually not changed by app teams) --
serviceAccount:
  # Create a dedicated ServiceAccount
  create: true

serviceMonitor:
  enabled: true
  interval: "30s"
  path: /metrics

networkPolicy:
  enabled: true
  # Additional ingress rules beyond the defaults
  additionalIngress: []
  # Additional egress rules beyond the defaults
  additionalEgress: []

podDisruptionBudget:
  enabled: true
  minAvailable: 1
